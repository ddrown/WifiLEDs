<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Blinky Lights!</title>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <script src="microajax.js" type="text/javascript"></script>
  <script type="text/javascript">
  window.onload = function() {
    setValues("/rest/user",showcolors);
  }
  var pattern_colors = [16, 1, 1, 1, 2, 16, 2, 4];
  function showcolors() {
    var patternid = document.getElementById("pattern").value;
    var colorcount = pattern_colors[patternid];
    for(var i = 0; i < 16; i++) {
      document.getElementById("static_color_"+i).style.display = (i < colorcount) ? "inline" : "none";
      document.getElementById("label_"+i).style.display = (i < colorcount) ? "inline" : "none";
      document.getElementById("br_"+i).style.display = (i < colorcount) ? "block" : "none";
    }
  }
  var premade_patterns = [
    {brightness: 255, pattern: 4, static_color_0: "#FF0000", static_color_1: "#FFFFFF"}, // 0: Candy Cane
    {brightness: 255, pattern: 4, static_color_0: "#FF0000", static_color_1: "#00FF00"}, // 1: Red/Green Twinkle
    {brightness: 255, pattern: 7, static_color_0: "#FF0000", static_color_1: "#FFFFFF", static_color_2: "#00FF00", static_color_3: "#000000"}, // 2: Red/White/Green/Black circle
    {brightness: 255, pattern: 7, static_color_0: "#FF0000", static_color_1: "#808000", static_color_2: "#00FF00", static_color_3: "#808000"}, // 3: Red/Yellow/Green/Yellow circle
    {brightness: 255, pattern: 7, static_color_0: "#0000FF", static_color_1: "#00FF00", static_color_2: "#FFFF00", static_color_3: "#FF0000"}, // 4: Rainbow circle
    ];
  function show_pattern(id) {
    var pattern_data = premade_patterns[id];
    for(const field in pattern_data) {
      document.getElementById(field).value = pattern_data[field];
    }
    showcolors();
  }
  </script>
</head>
<body>
  <form method=post action="/post/user">
    <label for="brightness" class=formlabel>Brightness</label>
    <input type="range" id="brightness" name="brightness" min="0" max="255"/><br/>

    <label for="pattern" class=formlabel>Pattern ID</label>
    <select id="pattern" name="pattern" onchange="showcolors()">
      <option value=0>BPM</option>
      <option value=1>Static</option>
      <option value=2>Walk</option>
      <option value=3>Fade</option>
      <option value=4>Twinkle</option>
      <option value=5>Palette</option>
      <option value=6>March</option>
      <option value=7>Circle</option>
    </select><br/>

    <label for="static_color_0" id="label_0" class=formlabel>Static Color #0</label>
    <input type="color" id="static_color_0" name="static_color_0"/><br id="br_0"/>
    <label for="static_color_1" id="label_1" class=formlabel>Static Color #1</label>
    <input type="color" id="static_color_1" name="static_color_1"/><br id="br_1"/>
    <label for="static_color_2" id="label_2" class=formlabel>Static Color #2</label>
    <input type="color" id="static_color_2" name="static_color_2"/><br id="br_2"/>
    <label for="static_color_3" id="label_3" class=formlabel>Static Color #3</label>
    <input type="color" id="static_color_3" name="static_color_3"/><br id="br_3"/>
    <label for="static_color_4" id="label_4" class=formlabel>Static Color #4</label>
    <input type="color" id="static_color_4" name="static_color_4"/><br id="br_4"/>
    <label for="static_color_5" id="label_5" class=formlabel>Static Color #5</label>
    <input type="color" id="static_color_5" name="static_color_5"/><br id="br_5"/>
    <label for="static_color_6" id="label_6" class=formlabel>Static Color #6</label>
    <input type="color" id="static_color_6" name="static_color_6"/><br id="br_6"/>
    <label for="static_color_7" id="label_7" class=formlabel>Static Color #7</label>
    <input type="color" id="static_color_7" name="static_color_7"/><br id="br_7"/>
    <label for="static_color_8" id="label_8" class=formlabel>Static Color #8</label>
    <input type="color" id="static_color_8" name="static_color_8"/><br id="br_8"/>
    <label for="static_color_9" id="label_9" class=formlabel>Static Color #9</label>
    <input type="color" id="static_color_9" name="static_color_9"/><br id="br_9"/>
    <label for="static_color_10" id="label_10" class=formlabel>Static Color #10</label>
    <input type="color" id="static_color_10" name="static_color_10"/><br id="br_10"/>
    <label for="static_color_11" id="label_11" class=formlabel>Static Color #11</label>
    <input type="color" id="static_color_11" name="static_color_11"/><br id="br_11"/>
    <label for="static_color_12" id="label_12" class=formlabel>Static Color #12</label>
    <input type="color" id="static_color_12" name="static_color_12"/><br id="br_12"/>
    <label for="static_color_13" id="label_13" class=formlabel>Static Color #13</label>
    <input type="color" id="static_color_13" name="static_color_13"/><br id="br_13"/>
    <label for="static_color_14" id="label_14" class=formlabel>Static Color #14</label>
    <input type="color" id="static_color_14" name="static_color_14"/><br id="br_14"/>
    <label for="static_color_15" id="label_15" class=formlabel>Static Color #15</label>
    <input type="color" id="static_color_15" name="static_color_15"/><br id="br_15"/>

    <input type="submit" style="width:150px" class="btn btn--m btn--blue" value="Save">
  </form>
  <div>
    Premade patterns!<br>
    <button type="button" onclick="show_pattern(0)">Candy Cane</button><br>
    <button type="button" onclick="show_pattern(1)">Red/Green Twinkle</button><br>
    <button type="button" onclick="show_pattern(2)">Red/White/Green/Black Circle</button><br>
    <button type="button" onclick="show_pattern(3)">Red/Yellow/Green/Yellow Circle</button><br>
    <button type="button" onclick="show_pattern(4)">Rainbow</button><br>
  </div>
  <a href="/admin.html" style="width:150px" class="btn btn--m btn--blue">Network Settings</a>
  <div>Compile Date: <span id=compile_date></span></div>
</body>
</html>
